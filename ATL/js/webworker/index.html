<html>
<head>
  <meta http-equiv="Content-Type" content="text/xhtml+xml; charset=UTF-8" />
  <title>Tutorial</title>
  <script type="text/javascript">
<!--
var worker;
function go () {
  document.getElementById ("output").value="";
  if (worker) {
	worker.terminate();
  }
  var argv = encodeURIComponent("/bin/ocaml\0"+document.getElementById ("input").value);
  worker = new Worker ("JsClient.js?argv="+argv);
  worker.onmessage = function (m) {
    if (typeof m.data == 'string') {
	var output=document.getElementById ("output");
	if (m.data == "\0\n") {
		output.scrollTop = output.scrollHeight
	} else {
  		output.value+=m.data;
	}
    }
  }
}
//-->
</script>
</head>

<body>
<textarea id="input" rows="2" cols="40" onkeyup="go()" onchange="go()" style="width:90%">
SAMPLE_INPUT</textarea> 
<button onclick="go">go</button>
<br>
<textarea id="output" rows="10" cols="40" style="width:100%;height:90%" readonly>
</textarea> 
</body>

</html>
